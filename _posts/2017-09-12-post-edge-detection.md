---
title: "Post: Edge detection"
date: 2017-09-12
categories:
  - Post
last_modified_at: 2017-09-12T22:21:25-05:00
---

边缘检测作为图像处理的基本任务之一，在不同的阶段都得到了广泛研究。哎！像个老学究似的说话太烦了，接下来我们用轻松愉快的方式来开始这篇博客。其实边缘检测也算是个老生长谈的问题了，从早先的各种梯度算子，到伟大的Canny（车道线检测的同学肯定会点赞），再到后来的Ncut及一些变种。还是取得了不错的效果的。不过悲剧的是，几乎所有效果好一些的算子都有各种各样的超参需要调节。这对于经验和运气都是很大的考验。
然后时间来到了2012年，那是深度学习初露峥嵘之年，几位大神手持CNN和LSTM两把宝剑把图像领域砍的四分五裂，而边缘检测，作为图像处理佔板上的肥肉，自然少不了被来上两刀。首先拿边缘检测祭刀的便是(\\N^4-Fields\\)算法

## N4-Fields  

首先吐槽一下，这名字简直来的莫名其妙，该算法全称为Neural Network and Nearest Neighbor，中译版叫神经网络和最近邻。作者为了偷懒，取了4个首字母就搞定了算法命名。按这种起名方式，我将来要是开发了个算法Fast Unary Convolutional Kernel的话情何以勘啊。当然，吐槽归吐槽，算法还是要分析的，下面我们来简明扼要的描述一下：
其实按照现在观点看来，这文章干货并不是非常多。如果有赶时间的同学看完下面这句话基本就可以跳过该篇文章的分析了：首先对图片采用卷积后求均值的方式得到转化值（实质上就是提取图片特征向量），然后对特征向量采用PCA降维，然后将得到的向量采用k近邻的方式求得分类。So easy哈？确实如此
下面有闲情逸致的同学可以和我一起来看下该方法的具体细节，这其中也会包含无尽的公式作为bonus，二话不说，先来一个残暴的公式，对每个像素的转化计算可以表示为：

$$F(I)[x,y]=\over{1}{N^2}\sum_{i,j:|i-x|<=N/2,|j-y|<=N/2}F(I(i,j|M))[x-i,y-j]$$

(排版不是很好看，但是不要在意这些细节！！！）
公式看起来很恶心对吧，看到较长公式会产生呕吐感的同学可以尝试通过以下这句话缓解一下：首先把图片按某种模式或是算法进行转化得到一堆M大小的batch图片, 然后想求哪个点的输出值把所有转化出的图片在该位置的值求和再来个平均就搞定。
值得一提的是，为了相应科学界潮男们的号召，转化过程采用了卷积。得到了新图之后下一个任务就是用最近邻来得到最优分类啦。当然，伟大的vanpik已经告诉我们直接在高维数据上这么玩是不行滴，为了能够克服臭名昭著的维数灾，我们首先还是得想办法把维度做低一点，熟悉套路的同学看到这马上就能明白，是时候抱上PCA的大腿了。
